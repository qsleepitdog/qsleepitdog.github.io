{"version":3,"sources":["webpack:///./src/components/websocket.vue?163e","webpack:///src/components/websocket.vue","webpack:///./src/components/websocket.vue?a9dc","webpack:///./src/components/websocket.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","name","data","userId","websock","created","window","sessionStorage","getItem","initWebSocket","destroyed","close","methods","WebSocket","wsuri","onmessage","websocketonmessage","onopen","websocketonopen","onerror","websocketonerror","onclose","websocketclose","websocketsend","JSON","stringify","actions","console","log","e","send","Data","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAClHC,EAAkB,GCItB,GACEC,KAAM,OACNC,KAFF,WAGI,MAAO,CACLC,OAAN,GACMC,QAAS,KACT,MAAN,uCAGEC,QATF,WAUIX,KAAKS,OAASG,OAAOC,eAAeC,QAAQ,UAC5Cd,KAAKe,iBAEPC,UAbF,WAcIhB,KAAKU,QAAQO,SAEfC,QAAS,CACPH,cADJ,WAEM,IAAN,aACMf,KAAKU,QAAU,IAAIS,UAAUC,EAAnC,aACMpB,KAAKU,QAAQW,UAAYrB,KAAKsB,mBAC9BtB,KAAKU,QAAQa,OAASvB,KAAKwB,gBAC3BxB,KAAKU,QAAQe,QAAUzB,KAAK0B,iBAC5B1B,KAAKU,QAAQiB,QAAU3B,KAAK4B,gBAE9BJ,gBATJ,WAUM,IAAN,kBACA,qBACMxB,KAAK6B,cAAcC,KAAKC,UAAUC,KAEpCN,iBAdJ,WAeM1B,KAAKe,iBAEPO,mBAjBJ,SAiBA,GAEMV,OAAOqB,QAAQC,IAAIC,IAErBN,cArBJ,SAqBA,GACM7B,KAAKU,QAAQ0B,KAAKC,IAEpBT,eAxBJ,SAwBA,GACMhB,OAAOqB,QAAQC,IAAI,OAAQC,MC9CkT,I,YCO/UG,EAAY,eACd,EACAxC,EACAQ,GACA,EACA,KACA,KACA,MAIa,aAAAgC,E","file":"js/chunk-2d0ddb74.ee756816.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"test\"></div>\n</template>\n\n<script>\nexport default {\n  name: 'test',\n  data () {\n    return {\n      userId:'',\n      websock: null,\n       wsuri: 'ws://' + 'localhost:1209' + '/websocket/show'\n    }\n  },\n  created () {\n    this.userId = window.sessionStorage.getItem('userId')\n    this.initWebSocket();\n  },\n  destroyed () {\n    this.websock.close() //离开路由之后断开websocket连接\n  },\n  methods: {\n    initWebSocket () { //初始化weosocket\n      const wsuri = this.wsuri;\n      this.websock = new WebSocket(wsuri+this.userId);\n      this.websock.onmessage = this.websocketonmessage;\n      this.websock.onopen = this.websocketonopen;\n      this.websock.onerror = this.websocketonerror;\n      this.websock.onclose = this.websocketclose;\n    },\n    websocketonopen () { //连接建立之后执行send方法发送数据\n      let actions = { \"to\": this.userId,\n      text:'[show]Opened' };\n      this.websocketsend(JSON.stringify(actions));\n    },\n    websocketonerror () {//连接建立失败重连\n      this.initWebSocket();\n    },\n    websocketonmessage (e) { //数据接收\n      // const redata = JSON.parse(e.data);\n      window.console.log(e)\n    },\n    websocketsend (Data) {//数据发送\n      this.websock.send(Data);\n    },\n    websocketclose (e) {  //关闭\n      window.console.log('断开连接', e);\n    },\n  },\n}\n// https://www.jianshu.com/p/9d8b2e42328c\n</script>\n<style lang='less'>\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./websocket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./websocket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./websocket.vue?vue&type=template&id=2b1896da&\"\nimport script from \"./websocket.vue?vue&type=script&lang=js&\"\nexport * from \"./websocket.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}