{"version":3,"sources":["webpack:///./src/components/websocket.vue?e909","webpack:///src/components/websocket.vue","webpack:///./src/components/websocket.vue?a9dc","webpack:///./src/components/websocket.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","name","data","userId","websock","wsuri","connect","created","window","sessionStorage","getItem","initWebSocket","destroyed","close","methods","WebSocket","onmessage","websocketonmessage","onopen","websocketonopen","onerror","websocketonerror","onclose","websocketclose","text","websocketsend","JSON","stringify","actions","e","console","log","send","Data","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAClHC,EAAkB,GCOtB,GACEC,KAAM,KAINC,KALF,WAMI,MAAO,CACLC,OAAQ,GACRC,QAAS,KACTC,MAAO,qCACPC,SAAS,IAGbC,QAbF,WAcIb,KAAKS,OAASK,OAAOC,eAAeC,QAAQ,UAC5ChB,KAAKiB,iBAEPC,UAjBF,WAkBIlB,KAAKU,QAAQS,SAEfC,QAAS,CACPH,cADJ,WAEM,IAAN,aACMjB,KAAKU,QAAU,IAAIW,UAAUV,EAAQX,KAAKS,QAC1CT,KAAKU,QAAQY,UAAYtB,KAAKuB,mBAC9BvB,KAAKU,QAAQc,OAASxB,KAAKyB,gBAC3BzB,KAAKU,QAAQgB,QAAU1B,KAAK2B,iBAC5B3B,KAAKU,QAAQkB,QAAU5B,KAAK6B,gBAE9BJ,gBATJ,WAUM,IAAN,GACQ,GAAMzB,KAAKS,OACXqB,KAAM,gBACR9B,KAAK+B,cAAcC,KAAKC,UAAUC,KAEpCP,iBAfJ,WAgBM3B,KAAKiB,iBAEPM,mBAlBJ,SAkBA,GAGWvB,KAAKY,SACM,YAAVuB,EAAE3B,MAAgC,mBAAV2B,EAAE3B,OAC5BR,KAAKY,SAAWZ,KAAKY,QACrBE,OAAOsB,QAAQC,IAAIF,EAAE3B,OAIzBM,OAAOsB,QAAQC,IAAIF,IAErBJ,cA9BJ,SA8BA,GACM/B,KAAKU,QAAQ4B,KAAKC,IAEpBV,eAjCJ,SAiCA,GACMf,OAAOsB,QAAQC,IAAI,OAAQF,GACvBnC,KAAKY,UAASZ,KAAKY,SAAWZ,KAAKY,YC/DsS,I,YCO/U4B,EAAY,eACd,EACA1C,EACAQ,GACA,EACA,KACA,KACA,MAIa,aAAAkC,E","file":"js/chunk-2d0ddb74.7223a688.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"test\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"test\">\n    <!-- <show></show> -->\n  </div>\n</template>\n\n<script>\n// import show from './Show'\nexport default {\n  name: 'ws',\n  // components:{\n  //   show : show\n  // },\n  data () {\n    return {\n      userId: '',\n      websock: null,\n      wsuri: 'ws://' + 'localhost:1209' + '/websocket/show',\n      connect: false\n    }\n  },\n  created () {\n    this.userId = window.sessionStorage.getItem('userId')\n    this.initWebSocket();\n  },\n  destroyed () {\n    this.websock.close() //离开路由之后断开websocket连接\n  },\n  methods: {\n    initWebSocket () { //初始化weosocket\n      const wsuri = this.wsuri;\n      this.websock = new WebSocket(wsuri + this.userId);\n      this.websock.onmessage = this.websocketonmessage;\n      this.websock.onopen = this.websocketonopen;\n      this.websock.onerror = this.websocketonerror;\n      this.websock.onclose = this.websocketclose;\n    },\n    websocketonopen () { //连接建立之后执行send方法发送数据\n      let actions = {\n        \"to\": this.userId,\n        text: '[show]Opened'      };\n      this.websocketsend(JSON.stringify(actions));\n    },\n    websocketonerror () {//连接建立失败重连\n      this.initWebSocket();\n    },\n    websocketonmessage (e) { //数据接收\n      // const redata = JSON.parse(e.data);\n      // 第一次确认是否已经连接上\n      if (!this.connect) {\n        if (e.data == '发送个体消息成功' || e.data == '[control]Opened') {\n          this.connect = !this.connect;\n          window.console.log(e.data)\n          // this.$refs.show.fadeToAction('Yes', 0.2);\n        }\n      }\n      window.console.log(e)\n    },\n    websocketsend (Data) {//数据发送\n      this.websock.send(Data);\n    },\n    websocketclose (e) {  //关闭\n      window.console.log('断开连接', e);\n      if (this.connect) this.connect = !this.connect;\n    },\n  },\n}\n// https://www.jianshu.com/p/9d8b2e42328c\n</script>\n<style lang='less'>\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./websocket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./websocket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./websocket.vue?vue&type=template&id=7120d8fa&\"\nimport script from \"./websocket.vue?vue&type=script&lang=js&\"\nexport * from \"./websocket.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}